<script src="/assets/js/docsearch@3.js"></script>
<script>
    // docsearch config
    {% if page.lang == "zh" -%}
    const docSearchTranslations = {
        modal: {
            searchBox: {
                resetButtonTitle: '清空',
                cancelButtonText: '取消',
            },
            errorScreen: {
                titleText: '无法获取结果',
                helpText: '请检查你的网络连接。',
            },
            footer: {
                selectText: '选择',
                navigateText: '移动',
                closeText: '关闭',
            },
            noResultsScreen: {
                noResultsText: '找不到',
                suggestedQueryText: '试试搜索',
            },
        },
    };
    {% endif -%}

    docsearch({
        container: '{{ site.algolia.container }}',
        appId: '{{ site.algolia.app_id }}',
        indexName: '{{ site.algolia.index_name }}',
        apiKey: '{{ site.algolia.api_key }}',
        disableUserPersonalization: true,
        {% if page.lang == "zh" -%}
        placeholder: '搜索文档',
        translations: docSearchTranslations
        {% endif -%}
    });

    // open external link in a new window
    function extLinkNewWindow() {
        for (let links = document.links, i = 0; i < links.length; i++) {
            let singleLink = links[i];
            if (singleLink.href !== null && singleLink.hostname !== document.location.hostname) {
                singleLink.target = "_blank";
                singleLink.rel = "noopener noreferrer";
            }
        }
    }
    extLinkNewWindow();

</script>